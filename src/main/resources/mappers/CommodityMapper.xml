<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.CommodityMapper">
    <resultMap id="BaseResultMap" type="com.pojo.Commodity">
        <id column="commodityID" jdbcType="INTEGER" property="commodityID"/>
        <result column="picture" jdbcType="VARCHAR" property="picture"/>
        <result column="brand" jdbcType="TINYINT" property="brand"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="redname" jdbcType="VARCHAR" property="redname"/>
        <result column="blackname" jdbcType="VARCHAR" property="blackname"/>
        <result column="price" jdbcType="DECIMAL" property="price"/>
        <result column="spell" jdbcType="VARCHAR" property="spell"/>
        <result column="BYBT" jdbcType="TINYINT" property="BYBT"/>
        <result column="adtime" jdbcType="DATE" property="adtime"/>
        <result column="caid" jdbcType="INTEGER" property="caid"/>
    </resultMap>
    <resultMap id="CommodityguigeMap" type="com.pojo.Commodityguige">
        <id     column="id"          jdbcType="INTEGER"         property="id"   />
        <result column="sumname"     jdbcType="VARCHAR"     property="sumname" />
        <result column="price"       jdbcType="DOUBLE"      property="price" />
        <result column="cpid"        jdbcType="INTEGER"         property="cpid" />
        <result column="gg1"         jdbcType="INTEGER"     property="gg1" />
        <result column="gg2"         jdbcType="INTEGER"     property="gg2" />
        <result column="gg3"         jdbcType="INTEGER"     property="gg3" />
        <result column="comid"       jdbcType="INTEGER"         property="comid"/>
        <result column="s1"          jdbcType="INTEGER"         property="s1"  />
        <result column="s2"          jdbcType="INTEGER"         property="s2"  />
        <association property="commodityguige" resultMap="BaseResultMap"/>
    </resultMap>
    <resultMap id="CommoditytomoreMap" type="com.pojo.Commoditytomore">
        <id     column="cmid"        jdbcType="INTEGER"              property="cmid" />
        <result column="cp1"        jdbcType="VARCHAR"              property="cp1"/>
        <result column="cp2"        jdbcType="VARCHAR"              property="cp2"/>
        <result column="cp3"        jdbcType="VARCHAR"              property="cp3"/>
        <result column="cp4"        jdbcType="VARCHAR"              property="cp4"/>
        <result column="cp5"        jdbcType="VARCHAR"              property="cp5"/>
        <result column="cp6"        jdbcType="VARCHAR"              property="cp6"/>
        <result column="cp7"        jdbcType="VARCHAR"              property="cp7"/>
        <result column="cp8"        jdbcType="VARCHAR"              property="cp8"/>
        <result column="cp9"        jdbcType="VARCHAR"              property="cp9"/>
        <result column="cp10"        jdbcType="VARCHAR"              property="cp10"/>
        <result column="comid"        jdbcType="INTEGER"              property="comid"/>
        <result column="pp"        jdbcType="VARCHAR"              property="pp"/>
        <result column="fhd"        jdbcType="VARCHAR"              property="fhd"/>
        <result column="pptp"        jdbcType="VARCHAR"              property="pptp"/>
        <result column="ppsm"        jdbcType="VARCHAR"              property="ppsm"/>
        <result column="renx"        jdbcType="VARCHAR"              property="renx"/>
        <association property="commoditytomore" resultMap="BaseResultMap"/>
    </resultMap>

    <select id="getCommodity" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        select * from commodity
        where commodityID=#{commodityID}
    </select>
<!--    <select id="getCommodityBycaid" parameterType="java.lang.Integer" resultMap="BaseResultMap">-->
<!--        SELECT c.*,cg.*,cm.* FROM-->
<!--                                 commodity as c ,commodityguige cg,commoditytomore cm-->
<!--        where c.commodityID=cg.comid and c.commodityID=cm.comid-->
<!--          and c.caid=#{id}-->
<!--    </select>-->
    <select id="getCommodityBycaid" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        SELECT * FROM commodity
        where  caid=#{caid}
            LIMIT 0,10
    </select>

    <select id="getCommodityLike"   resultMap="BaseResultMap">
        select
        * from commodity where  (`name` like  concat('%',#{mh},'%')
                   or  redname like concat('%',#{mh},'%')
                   or  blackname like concat('%',#{mh},'%')
            or  spell like concat('%',#{mh},'%'))


    </select>

  


    <!-- 根据id删除某个lie信息 -->
    <delete id="deleteCommodity" parameterType="java.lang.Integer">
        delete from commodity
        where commodityID = #{commodityID,jdbcType=INTEGER}
    </delete>

    <!-- 根据id更新biao信息 -->
    <update id="editCommodity" parameterType="com.pojo.Commodity">
        update commodity set
        picture=#{picture},
        brand=#{brand},
        `name`=#{name},
        redname=#{redname},
        blackname=#{blackname},
        price=#{price},
        spell=#{spell},
        BYBT=#{BYBT},
        adtime=#{adtime}
        where commodityID = #{commodityID,jdbcType=INTEGER}
    </update>

</mapper>
